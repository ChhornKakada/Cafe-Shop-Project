<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Drink Selection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <style>
        .wrapper{
            background: url('https://cutewallpaper.org/21/coffee-hd-wallpaper/Coffee-Wallpaper-Espresso-Coffee,-Hd-Wallpapers-.jpg')no-repeat;
            height: 100vh;
        }
        .hidden {
            display: none;
        }
        .container{
            padding-top: 50px;
            display: flex;
        }
        .left, .right {
            flex: 1;
            height: auto;
            background-color: green;
            border: 2px solid rgba(255,255,255,0.5);
            background: transparent;
        }
        .card{
            border: 1px solid white;
            border-radius: 5px;
            box-shadow: 0 0 5px;
            color: aliceblue;
            background: transparent;
        }
        .card:hover{
            cursor: pointer;
        }
        
        #popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: skyblue;
        }
        #close {
            position: absolute;
            top: 5px;
            right: 5px;
            cursor: pointer;
        }
        
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container">
            <div class="left">
                <div class="item-section">
                    <table>
                        <tr>
                            <td>
                                <button id="drink-button" class="btn btn-primary">Drink</button>
                            </td>
                            <td>
                                <button id="food-button" class="btn btn-primary">Food</button>
                            </td>
                        </tr>
                    </table>
                    <hr class="text-white">
                    <div class="item-selection">

                    <!-- Drink content goes here -->
                        <div id="drink-section" class="hidden">
                            <div class="col-sm-4">
                                <div class="card">
                                  <img src="product1.jpg" class="card-img-top" alt="Drink 1">
                                  <div class="card-body">
                                    <h5 class="card-title">Drink 1</h5>
                                  </div>
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <div class="card">
                                  <img src="product1.jpg" class="card-img-top" alt="Drink 1">
                                  <div class="card-body">
                                    <h5 class="card-title">Drink 2</h5>
                                  </div>
                                </div>
                            </div>
                        </div>
                    

                    <!-- Food content goes here -->
                        <div id="food-section" class="hidden">
                            <div class="col-sm-4">
                                <div class="card">
                                  <img src="product1.jpg" class="card-img-top" alt="Drink 1">
                                  <div class="card-body">
                                    <h5 class="card-title">food 1</h5>
                                  </div>
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <div class="card">
                                  <img src="product1.jpg" class="card-img-top" alt="Drink 1">
                                  <div class="card-body">
                                    <h5 class="card-title">food 2</h5>
                                  </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="right">
                <h2 class="text-white">Order Information</h2>
                <table class="table table-striped table-bordered">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>size</th>
                            <th>category</th>
                            <th>quantity</th>
                            <th>price</th>
                            <th>total price</th>
                            <th>Action</th>
                        </tr>
                    </thead>

                    <tbody id="order-info">
                
                    </tbody>
                </table>

            <!--checkout part-->
                <div id="popup">
                    <span id="close">X</span>
                    <label for="totalMoney">Total money received from customer:</label>
                    <input type="number" id="totalMoney">
                    <br>
                    <label for="totalPrice">Total price of items:</label>
                    <input type="number" id="totalPrice">
                    <br>
                    <button id="calculate">Calculate</button>
                    <p id="result"></p>
                </div>
                <button id="checkout" class="btn btn-primary btn-lg float-end">Checkout</button>
            </div>
        </div>

    </div>

    <script>
        const drinkButton = document.querySelector('#drink-button');
        const foodButton = document.querySelector('#food-button');
        const drinkSection = document.querySelector('#drink-section');
        const foodSection = document.querySelector('#food-section');

        drinkButton.addEventListener('click', () => {
            drinkSection.classList.remove('hidden');
            foodSection.classList.add('hidden');
        });

        foodButton.addEventListener('click', () => {
            foodSection.classList.remove('hidden');
            drinkSection.classList.add('hidden');
        });

        const drinkList = document.querySelector("#drink-section");
        const foodList = document.querySelector('#food-section');
        const orderInfo = document.querySelector("#order-info");


    // Drink part

        // Listen for clicks on the drink list
        drinkList.addEventListener("click", (e) => {
        // Check if a drink box was clicked
        if (e.target.closest(".card")) {
            // Get the drink box element
            const drinkBox = e.target.closest(".card");

            // Get the drink information
            const name = drinkBox.querySelector(".card-title").textContent;
            const size = drinkBox.getAttribute("data-size");
            const category = drinkBox.getAttribute("data-category");
            const price = drinkBox.getAttribute("data-price");
            let quantity = 1; 
            let totalPrice = price * quantity; 

            //order information part that get from database
            // Create a new row for the order information
            const row = document.createElement("tr");
            row.innerHTML = `
            <td class="text-white"></td> <!-- Order number will be added later -->
            <td class="text-white">${name}</td>
            <td class="text-white">
              <select name="size" id="size-select">
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
              </select>
            </td>
            <td class="text-white">${category}</td>
            <td class="text-white"><button>-</button>${quantity}<button>+</button></td>
            <td class="text-white">${price}</td>
            <td class="text-white">${totalPrice}</td>
            <td >
                <button class="btn btn-primary">Edit</button>
                <button class="btn btn-danger">Delete</button>
            </td>

            `;
            
            // Add the new row to the order information
            orderInfo.appendChild(row);

            // Update the order numbers
            updateOrderNumbers();
        }
        });

    //

    //Food Part    

        // Listen for clicks on the food list
        foodList.addEventListener("click", (e) => {
        // Check if a drink box was clicked
        if (e.target.closest(".card")) {
            // Get the drink box element
            const drinkBox = e.target.closest(".card");

            // Get the drink information
            const name = drinkBox.querySelector(".card-title").textContent;
            const size = drinkBox.getAttribute("data-size");
            const category = drinkBox.getAttribute("data-category");
            const price = drinkBox.getAttribute("data-price");
            let quantity = 1;
            let totalPrice = price * quantity; 

            //order information part that get from database
            // Create a new row for the order information
            const row = document.createElement("tr");
            row.innerHTML = `
            <td class="text-white"></td> <!-- Order number will be added later -->
            <td class="text-white">${name}</td>
            <td class="text-white"></td>
            <td class="text-white">${category}</td>
            <td class="text-white"><button>-</button>${quantity}<button>+</button></td>
            <td class="text-white">${price}</td>
            <td class="text-white">${totalPrice}</td>
            <td >
                <button class="btn btn-primary">Edit</button>
                <button class="btn btn-danger">Delete</button>
            </td>
           
            `;
            
            // Add the new row to the order information
            orderInfo.appendChild(row);

            // Update the order numbers
            updateOrderNumbers();
        }
        });

    //


        // Listen for clicks on the order info
        orderInfo.addEventListener("click", (e) => {
        // Check if a button was clicked
        if (e.target.tagName === "BUTTON") {
            // Get the row and quantity cell
            const row = e.target.closest("tr");
            const quantityCell = row.cells[4];

            // Check which button was clicked
            if (e.target.textContent === "+") {
            // Increase the quantity
                let quantity = Number(quantityCell.textContent.replace(/\D/g, ""));
                quantity++;
                quantityCell.innerHTML = `<button>-</button>${quantity}<button>+</button>`;
            } else if (e.target.textContent === "-") {
            // Decrease the quantity
            let quantity = Number(quantityCell.textContent.replace(/\D/g, ""));
                if (quantity > 1) {
                    quantity--;
                    quantityCell.innerHTML = `<button>-</button>${quantity}<button>+</button>`;
                }
            } else if (e.target.textContent === "Edit") {
                // Edit the item
                

            } else if (e.target.textContent === "Delete") {
            // Delete the row
                row.remove();

            // Update the order numbers
            updateOrderNumbers();
            }
        }
        });
        function updateOrderNumbers() {
            // Get all rows in the order information
            const rows = orderInfo.querySelectorAll("tr");

            // Loop through each row and update the order number
            let orderNumber = 1;
            rows.forEach((row) => {
                row.cells[0].textContent = orderNumber;
                orderNumber++;
            });
        }

        document.querySelector('#checkout').addEventListener('click', function() {
            document.querySelector('#popup').style.display = 'block';
        });

        document.querySelector('#close').addEventListener('click', function() {
            document.querySelector('#popup').style.display = 'none';
        });

        document.querySelector('#calculate').addEventListener('click', function() {
            let totalMoney = document.querySelector('#totalMoney').value;
            let totalPrice = document.querySelector('#totalPrice').value;
            if (totalMoney && totalPrice) {
                let change = totalMoney - totalPrice;
                if (change < 0) {
                    document.querySelector('#result').textContent = 'Customer money is less than total price';
                } else {
                    document.querySelector('#result').textContent = 'Change due: ' + change;
                }
            }
        });
    </script>
    
</body>
</html>